(function(a,b,c){a||(b=this,a=b.$={}),a.bind=function(){var a=Array.prototype.slice,b=Function.prototype.bind||function(a){var b=this;return function(){return b.apply(a,arguments)}};return function(c,d){return b.apply(c,a.call(arguments,1))}}(),a.each=function(){var c=b.TypeError||function c(){};return function(b,d,e){if(b!=null){var f=typeof d,g;if(f!=="function")throw new c(f+" is not a function");if(a.type(b)==="array"){for(g=0;g<b.length;++g)if(d.call(e,b[g],g,b)===!1)return}else for(g in b)if(d.call(e,b[g],g,b)===!1)return}}}(),a.env={dev:!0,client:!0,mozilla:!0,msie:!0,webkit:!0,opera:!0,vervsion:1.3},a.error=function(){var c=b.Error,d=a.env;return function(a){if(a&&(!d.client||d.dev))throw new c(a)}}(),a.extend=function d(b){var c=arguments,e=b===!0?1:0,f,g=c[e];for(;e<c.length;++e)a.each(c[e],function(a,c,e){b===!0&&g[c]?d(b,g[c],e[c]):g[c]=e[c]});return g},a.filter=function(){},a.indexOf=function(){},a.inherits=function(){function a(){}function b(b,c){a.prototype=c.prototype,b.prototype=new a,b.prototype.constructor=c}function c(a,b){a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1}})}return Object.create?c:b}(),a.lastIndexOf=function(){},a.map=function(){},a.noop=function(){},a.now=Date.now||function(){return(new Date).getTime()},a.toArray=function(){var a=Array.prototype.push,b=Array.prototype.slice,c=Object.prototype.toString,d="[object Array]",e="[object Object]",f="[object Arguments]";return function(a,g,h){var i=c.call(a);return i===d?g!=null||h!=null?b.call(a,g,h):a:a.length==null||i!==e&&i!==f?[a]:b.call(a,g,h)}}(),a.trim=function(){var a=/^\s+|\s+$/,b=String.prototype.trim||function(){return this.replace(a,"")};return function(a){return a?b.call(a):""}}(),a.type=function(){var a,c=b.String,d=b.Object.prototype.toString,e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],f={};for(a=0;a<e.length;++a)f["[object "+e[a]+"]"]=e[a].toLowerCase();return function(a,b){var e=a==null?c(a):f[d.call(a)]||"object";if(b)return b===e?!0:!1;return e}}();var e=b.Error,f=b.TypeError,g=b.RegExp,h={regexp:{email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,dateISO:/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/,time:/^([01][0-9])|(2[0123]):([0-5])([0-9])$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,integer:/^-?\d+$/,digits:/^\d+$/,ziprange:/^90[2-5]\d\{2}-\d{4}$/,nowhitespace:/^\S+$/i,lettersonly:/^[a-z]+$/i,alphanumeric:/^\w+$/i,letterswithbasicpunc:/^[a-z-.,()'\"\s]+$/i,digitsanddashes:/[^0-9-]+/,ipv4:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,ipv6:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i},regexpSpecial:{words:/\b\w+\b/g,date:/Invalid|NaN/,tags:/<.[^<>]*?>/g,whitespaces:/&nbsp;|&#160;/gi,numbersandpunkt:/[0-9.(),;:!?%#$'"_+=\/-]*/g,nodigets:/\D/g},errPrefix:"Schema validation error, "};function i(b,c,d){var e=a.type(c),i;if(e==="string")c={type:c};else if(e!=="object"&&e!=="function")throw new f(h.errPrefix+"bad schema");if(e==="function")return c(b)===!1?"custom validation fail "+d:!0;if(c.type){i=a.type(b);if(c.type!==i&&!(new g(c.type)).test(i))return i+" "+d+"is not a "+c.type}if(c.range){if(c.type!=="number")throw new f(h.errPrefix+"range can be used with numbers only");if(b<c.range[0]||b>c.range[1])return"expected range "+d+"is '"+c.range[0]+"-"+c.range[1]+"', but found '"+b+"'"}if(c.length)if(typeof c.length==="number"){if(b.length!==c.length)return"expected length "+d+"is '"+c.length+"', but found '"+b.length+"'"}else if(b.length<c.length[0]||b.length>c.length[1])return"expected length "+d+"is '"+c.length[0]+"-"+c.length[1]+", but found '"+b.length+"'";if(c.pattern&&!c.pattern.test(b))return"pattern mismatch "+d;return!0}function j(b,c,d){if(c.optional&&!b)return!0;var f=i(b,c,"");if(f!==!0&&!d)throw new e(h.errPrefix+" "+f);c.schema&&function g(b,c){b&&a.each(b,function(a,b){if(a.optional&&!c[b])a["default"]&&(c[b]=a["default"]);else{f=i(c[b],a,"of '"+b+"' ");if(f!==!0){if(d)return!1;throw new e(h.errPrefix+" "+f)}a.schema&&g(a.schema,c[b])}})}(c.schema,b);return f}a.validate=j,j.options=h,a.each(h.regexp,function(a,b){j[b]=function(b){return a.test(b)}}),j.date=function(a){return!h.regexpSpecial.date.test(new Date(a))},j.creditcard=function(a){if(h.regexpSpecial.digitsanddashes.test(a))return!1;var b=0,c=0,d=!1,e,f,c;a=a.replace(h.regexpSpecial.nodigets,"");for(e=a.length-1;e>=0;e--)f=a.charAt(e),c=parseInt(f,10),d&&((c*=2)>9&&(c-=9)),b+=c,d=!d;return b%10==0};function k(a){var b=h.regexpSpecial;return a.replace(b.tags," ").replace(b.whitespaces," ").replace(b.numbersandpunct,"")}j.maxWords=function(a,b){return k(a).match(h.regexpSpecial.words).length<b},j.minWords=function(a,b){return k(a).match(h.regexpSpecial.words).length>=b},j.rangeWords=function(a,b){var c=k(a).match(h.regexpSpecial.words).length;return c>=b[0]&&c<b[1]}})(exports,global)